<div class="row">
  <h2 class="col-lg-4 text-white">タスク一覧</h2>
  <div class="col-lg-8">
    <%= search_form_for @q do |f| %>
      <%= f.search_field :title_cont, placeholder: "タスク名で検索" %>
      <%= f.submit "検索" %>
    <% end %>
  </div>
</div>


<div class="py-4 px-4 bg-light">
  <%= link_to "新しいタスク", new_task_path, class: "btn btn-primary" %>
  <%= render 'task', tasks: @tasks %>

  <h1>円グラフ</h1>
  <canvas id="myPieChart"></canvas>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.js"></script>

  <script>
  var ctx = document.getElementById("myPieChart");
  var myPieChart = new Chart(ctx, {
    type: 'pie',
    data: {
      labels: ["完了", "未完了",],
      datasets: [{
          backgroundColor: [
              "#BB5179",
              // "#FAFF67",
              // "#58A27C",
              "#3C00FF"
          ],
          data: [<%= @tasks.where(status: "完了").count %>,<%= @tasks.where(status: "未完了").count %>]
      }]
    },
    options: {
      title: {
        display: true,
        text: 'タスク進捗度'
      }
    }
  });
  </script>
</div>