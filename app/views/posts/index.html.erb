<div class="row">
  <h2 class="col-lg-4 text-white">投稿一覧</h2>
  <div class="col-lg-8 form-inline">
    <%= search_form_for @q do |f| %>
      <%= f.search_field :content_cont, class: "form-control", placeholder: "投稿で検索" %>
      <%= f.submit "検索", class: "btn btn-light" %>
    <% end %>
  </div>
</div>

	<div class="py-4 px-4 bg-light">
    <%= render "form", post: @post %>
  </div>


    <% @posts.each do |post| %>
      <div class="py-4 px-4 bg-light mt-3">
        <%= post.content %>
        <div id="like-btn-<%= post.id %>">
          <%= render 'likes/like', post: post %>
          <%= "コメント数:#{post.comments.count}" %>
        </div>
        <% post.comments.each do |comment| %>
          <ul class="media-list">
            <li class="media">
              <%= attachment_image_tag comment.user, :image, :fill, 50, 50, fallback: "no_image.jpg", size: '50x50' %>
              <%= comment.user.name %>
              <%= comment.created_at.strftime('%m月%d日 %H時%M分') %></br>
              <%= comment.content %>
            </li>
          </ul>
        <% end %>

        <%= form_with model: [post, @comment], local: true do |f| %>
          <%= f.text_field :content, class: "form-control", placeholder: "コメントを入力" %>
          <%= f.hidden_field :user_id %>
          <%= f.submit "コメントする", class: "btn btn-info mt-2" %>
        <% end %>

      </div>
    <% end %>

    <%= paginate @posts %>
  </div>